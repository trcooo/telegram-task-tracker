:root{
  --bg1:#f6f8ff;
  --bg2:#eef3ff;
  --card: rgba(255,255,255,0.72);
  --card-border: rgba(255,255,255,0.8);
  --shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
  --text:#0f172a;
  --muted:#64748b;
  --primary:#3b82f6;
  --pill:#eef2ff;
  --danger:#ef4444;
  --success:#22c55e;
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--text);
  background: radial-gradient(1100px 600px at 30% 0%, var(--bg2), transparent 60%),
              radial-gradient(900px 600px at 90% 20%, #fdf2ff, transparent 50%),
              linear-gradient(180deg, var(--bg1), #ffffff 60%);
}

#app{
  max-width: 520px;
  margin: 0 auto;
  padding-bottom: calc(84px + env(safe-area-inset-bottom));
}

.topbar{
  position: sticky;
  top: 0;
  z-index: 10;
  padding: 14px 16px 10px;
  background: linear-gradient(180deg, rgba(246,248,255,0.92), rgba(246,248,255,0.60));
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(148,163,184,0.15);
}
.topbar__title{font-weight: 800; letter-spacing:-0.02em; font-size: 22px;}
.topbar__meta{margin-top:4px;color:var(--muted); font-size:13px;}

.main{
  padding: 14px 14px 160px;
}

.card{
  background: var(--card);
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow);
  border-radius: 22px;
  padding: 12px;
  backdrop-filter: blur(14px);
}

.section-title{
  display:flex; align-items:center; justify-content:space-between;
  font-weight: 750;
  margin: 8px 2px 10px;
}
.section-title small{color:var(--muted); font-weight:600;}

.list{
  display:flex; flex-direction:column; gap:10px;
}

.task{
  display:flex; align-items:center; gap:10px;
  padding: 12px;
  border-radius: 16px;
  background: rgba(255,255,255,0.75);
  border: 1px solid rgba(148,163,184,0.18);
  box-shadow: 0 8px 18px rgba(15,23,42,0.06);
  touch-action: pan-y;
  position: relative;
  overflow: hidden;
}
.task__dot{
  width: 10px; height:10px; border-radius:999px;
  background: var(--primary);
  box-shadow: 0 0 0 6px rgba(59,130,246,0.12);
}
.drag{
  width: 28px;
  height: 28px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 10px;
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(148,163,184,0.18);
  color: rgba(100,116,139,0.95);
  font-weight: 900;
  letter-spacing: -0.08em;
  user-select: none;
  touch-action: none;
}
.task__body{flex:1; min-width:0;}
.task__title{font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.task__meta{font-size:12px; color:var(--muted); margin-top:2px; display:flex; gap:8px; flex-wrap:wrap;}
.pill{
  font-size:12px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--pill);
  border: 1px solid rgba(99,102,241,0.18);
  color:#334155;
}
.pill--tag{background: rgba(236,253,245,0.7); border-color: rgba(16,185,129,0.25);}
.pill--list{background: rgba(239,246,255,0.8); border-color: rgba(59,130,246,0.25);}
.pill--time{background: rgba(255,247,237,0.8); border-color: rgba(249,115,22,0.25);}

.fastbar{
  position: fixed;
  left: 0; right: 0; bottom: calc(58px + env(safe-area-inset-bottom));
  max-width: 520px;
  margin: 0 auto;
  padding: 10px 12px;
  z-index: 20;
}
.fastbar__row{
  display:flex; gap:10px; align-items:center;
  background: rgba(255,255,255,0.72);
  border: 1px solid rgba(148,163,184,0.22);
  box-shadow: var(--shadow);
  border-radius: 22px;
  padding: 10px;
  backdrop-filter: blur(14px);
}
.quickinput{
  flex:1;
  border:0; outline:0;
  background: transparent;
  font-size: 15px;
  padding: 6px 8px;
}
.btn{
  border:0;
  border-radius: 18px;
  height: 40px; min-width: 40px;
  font-weight: 800;
}
.btn--primary{
  background: linear-gradient(180deg, #60a5fa, #3b82f6);
  color: white;
  box-shadow: 0 10px 18px rgba(59,130,246,0.25);
}
.hint{padding:6px 6px 0; font-size:12px; color: var(--muted);}
.chips{display:flex; gap:8px; overflow:auto; padding: 0 4px 8px;}
.chip{
  white-space:nowrap;
  padding: 8px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,0.65);
  border: 1px solid rgba(148,163,184,0.20);
  box-shadow: 0 8px 16px rgba(15,23,42,0.05);
  font-size: 12px;
  color: #334155;
}

.tabbar{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  max-width: 520px;
  margin: 0 auto;
  padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
  background: rgba(255,255,255,0.70);
  backdrop-filter: blur(18px);
  border-top: 1px solid rgba(148,163,184,0.18);
  display:flex; justify-content:space-between;
  z-index: 30;
}
.tab{
  border:0; background:transparent;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  color: #64748b; width: 20%;
  padding: 6px 0;
}
.tab__icon{font-size:18px;}
.tab__label{font-size:11px; font-weight:700;}
.tab.active{
  color: var(--text);
}
.tab.active .tab__icon{
  filter: drop-shadow(0 8px 10px rgba(59,130,246,0.25));
}

.grid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
}
.day{
  background: rgba(255,255,255,0.60);
  border: 1px solid rgba(148,163,184,0.18);
  border-radius: 16px;
  padding: 8px;
  min-height: 70px;
}
.day__num{font-size:12px;color:#475569;font-weight:800;}
.day__pill{
  margin-top:6px;
  padding: 5px 7px;
  border-radius: 12px;
  background: rgba(59,130,246,0.10);
  border: 1px solid rgba(59,130,246,0.18);
  font-size: 11px;
  overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
}
.more{
  margin-top:6px;
  font-size: 11px;
  color: #3b82f6;
  font-weight: 800;
}

.sheet{position:fixed; inset:0; display:none; z-index: 50;}
.sheet[aria-hidden="false"]{display:block;}
.sheet__backdrop{position:absolute; inset:0; background: rgba(15,23,42,0.35);}
.sheet__panel{
  position:absolute; left:0; right:0; bottom:0;
  max-width: 520px; margin:0 auto;
  background: rgba(255,255,255,0.86);
  backdrop-filter: blur(16px);
  border-top-left-radius: 26px;
  border-top-right-radius: 26px;
  padding: 12px 14px 18px;
  box-shadow: 0 -14px 40px rgba(15,23,42,0.20);
}
.sheet__handle{width:44px;height:5px;border-radius:999px;background:rgba(100,116,139,0.35);margin:0 auto 10px;}
.sheet__title{font-weight:900; font-size: 16px; margin-bottom: 10px;}

/* Schedule timeline (mobile-first) */
.timeline{
  position: relative;
  height: 980px; /* 06:00â€“22:00 */
  border-radius: 18px;
  overflow: hidden;
  background:
    linear-gradient(180deg, rgba(148,163,184,0.12) 1px, transparent 1px) 0 0 / 100% 60px,
    linear-gradient(180deg, rgba(148,163,184,0.07) 1px, transparent 1px) 0 0 / 100% 15px;
}
.timeline__inner{position: relative; height: 960px;}
.time-label{
  position: absolute;
  left: 10px;
  transform: translateY(-7px);
  font-size: 11px;
  color: rgba(100,116,139,0.9);
  font-weight: 800;
  background: rgba(246,248,255,0.85);
  border: 1px solid rgba(148,163,184,0.18);
  padding: 2px 6px;
  border-radius: 999px;
}
.time-gutter{width: 62px; position: absolute; left:0; top:0; bottom:0;}
.timeline-lane{position:absolute; left:68px; right:10px; top:0; bottom:0;}

.block{
  position: absolute;
  left: 0;
  right: 0;
  border-radius: 16px;
  padding: 10px 12px;
  border: 1px solid rgba(148,163,184,0.20);
  box-shadow: 0 10px 20px rgba(15,23,42,0.08);
  background: rgba(255,255,255,0.70);
  backdrop-filter: blur(12px);
  overflow: hidden;
}
.block[data-kind="meeting"]{background: rgba(219,234,254,0.65); border-color: rgba(59,130,246,0.25);} 
.block[data-kind="study"]{background: rgba(237,233,254,0.65); border-color: rgba(139,92,246,0.25);} 
.block[data-kind="other"]{background: rgba(254,243,199,0.65); border-color: rgba(245,158,11,0.25);} 
.block__title{font-weight: 850; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
.block__meta{margin-top:4px; font-size:11px; color: rgba(71,85,105,0.9); display:flex; gap:8px;}
.resize-handle{
  position:absolute; left:0; right:0; bottom:0;
  height: 18px;
  display:flex; justify-content:center; align-items:center;
  cursor: ns-resize;
}
.resize-handle::before{
  content:"";
  width: 40px;
  height: 4px;
  border-radius: 999px;
  background: rgba(100,116,139,0.35);
}

/* Priority Matrix */
.matrix{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.quad{
  min-height: 160px;
  border-radius: 18px;
  background: rgba(255,255,255,0.55);
  border: 1px dashed rgba(148,163,184,0.35);
  padding: 10px;
}
.quad__title{font-weight: 900; font-size: 12px; color: #334155; display:flex; justify-content:space-between;}
.quad__hint{font-weight: 700; font-size: 11px; color: rgba(100,116,139,0.9);}
.mini{
  margin-top:8px;
  padding: 8px 10px;
  border-radius: 14px;
  background: rgba(255,255,255,0.72);
  border: 1px solid rgba(148,163,184,0.18);
  box-shadow: 0 8px 14px rgba(15,23,42,0.06);
  font-size: 12px;
  font-weight: 800;
}
